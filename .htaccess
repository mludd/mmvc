RewriteEngine On

# Remove trailing slashes
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.+)/+$ http://%{HTTP_HOST}/$1 [R=301,L]

# Redirect all requests for nonexistent files to dispatcher

# Hide some stuff the visitors don't need to see (default directories
# for parts of the framework)
RewriteRule ^(smarty|models|controllers)(/.*)$ /index.php?controller=404 [L]
